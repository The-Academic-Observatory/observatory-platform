info:
  title: Elasticsearch API
  description: 'Query data from elasticsearch indexes'
  version: 0.1.9
paths:
  /query:
    get:
      operationId: query.search
      tags:
        - Query
      summary: Perform an elasticsearch search query
      description: Perform an elasticsearch search query
      parameters:
        - in: query
          name: agg
          description: The aggregation level
          required: true
          enum:
            - author
            - country
            - funder
            - group
            - institution
            - publisher
          type: string
        - name: subset
          in: query
          description: The required subset
          required: true
          enum:
            - citations
            - collaborations
            - disciplines
            - events
            - funders
            - journals
            - oa-metrics
            - output-types
            - publishers
          type: string
        - name: from
          in: query
          description: Start date
          required: false
          format: date
          minLength: 0
          maxLength: 10
          type: string
        - name: to
          in: query
          description: End date
          required: false
          format: date
          minLength: 0
          maxLength: 10
          type: string

        {% for param in query_parameters %}
        - name: {{ param }}
          in: query
          type: array
          items:
            type: string
          collectionFormat: multi
        {% endfor %}
#        - name: id
#          in: query
#          type: array
#          items:
#            type: string
#          collectionFormat: multi
#        - name: name
#          in: query
#          type: array
#          items:
#            type: string
#          collectionFormat: multi
#        - name: country
#          in: query
#          type: array
#          items:
#            type: string
#          collectionFormat: multi
#        - name: country_code
#          in: query
#          type: array
#          items:
#            type: string
#          collectionFormat: multi
#        - name: journal
#          in: query
#          type: array
#          items:
#            type: string
#          collectionFormat: multi
#        - name: region
#          in: query
#          type: array
#          items:
#            type: string
#          collectionFormat: multi
#        - name: subregion
#          in: query
#          type: array
#          items:
#            type: string
#          collectionFormat: multi
      responses:
        '200':
          description: Successfully return query results (items need to be updated)
          schema:
            type: array
            items:
              properties:
                fname:
                  type: string
                lname:
                  type: string
                timestamp:
                  type: string
      produces:
        - application/json
swagger: '2.0'